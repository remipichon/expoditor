<head>
    <title>learning_editor</title>
     <script src='http://192.168.1.54:2438/closure-library/closure/goog/base.js'></script> 
    

     


  <script>   

    goog.require('goog.math');

    //dragger
    goog.require('goog.fx.Dragger');
    goog.require('goog.dom');
    goog.require('goog.style');


    //add goog.dom.query (jQuery like)
    s = document.createElement('script');
    s.type = 'text/javascript';
    s.src = 'http://192.168.1.54:2438/query.js';
    $('head').append(s);

    //editor  
    goog.require('goog.dom');
    goog.require('goog.editor.Command');
    goog.require('goog.editor.Field');
    goog.require('goog.editor.plugins.BasicTextFormatter');
    goog.require('goog.editor.plugins.EnterHandler');
    goog.require('goog.editor.plugins.HeaderFormatter');
    goog.require('goog.editor.plugins.LinkBubble');
    goog.require('goog.editor.plugins.LinkDialogPlugin');
    goog.require('goog.editor.plugins.ListTabHandler');
    goog.require('goog.editor.plugins.LoremIpsum');
    goog.require('goog.editor.plugins.RemoveFormatting');
    goog.require('goog.editor.plugins.SpacesTabHandler');
    goog.require('goog.editor.plugins.UndoRedo');
    goog.require('goog.ui.editor.DefaultToolbar');
    goog.require('goog.ui.editor.ToolbarController');

    //resizeable
    goog.require('goog.array');
    goog.require('goog.debug.DivConsole');
    goog.require('goog.debug.LogManager');
    goog.require('goog.dom');
    goog.require('goog.events');
    goog.require('goog.events.EventType');
    goog.require('goog.log');
    goog.require('goog.dom.DomHelper');
    goog.require('goog.dom.forms');
    goog.require('goog.style');
    goog.require('goog.fx');
    goog.require('goog.fx.dom');
    goog.require('goog.string');
    goog.require('goog.fx.Dragger');
    goog.require('goog.fx.Dragger');
    goog.require('goog.fx.Dragger.EventType');
    goog.require('goog.math.Size');
    goog.require('goog.style');
    goog.require('goog.ui.Component');
    goog.require('goog.math.Coordinate');
    goog.require('goog.string');

    //add goog.ui.resizable 
    s = document.createElement('script');
    s.type = 'text/javascript';
    s.src = 'http://192.168.1.54:2438/goog.ui.resizable.js';
    $('head').append(s);


    //slideshow toolbar
    goog.require('goog.array');
    goog.require('goog.debug.DivConsole');
    goog.require('goog.debug.LogManager');
    goog.require('goog.dom');
    goog.require('goog.events');
    goog.require('goog.events.EventType');
    goog.require('goog.log');
    goog.require('goog.object');
    goog.require('goog.style');
    goog.require('goog.ui.Button');
    goog.require('goog.ui.ButtonSide');
    goog.require('goog.ui.Component.EventType');
    goog.require('goog.ui.Component.State');
    goog.require('goog.ui.Menu');
    goog.require('goog.ui.MenuItem');
    goog.require('goog.ui.Option');
    goog.require('goog.ui.SelectionModel');
    goog.require('goog.ui.Separator');
    goog.require('goog.ui.Toolbar');
    goog.require('goog.ui.ToolbarButton');
    goog.require('goog.ui.ToolbarMenuButton');
    goog.require('goog.ui.ToolbarRenderer');
    goog.require('goog.ui.ToolbarSelect');
    goog.require('goog.ui.ToolbarSeparator');
    goog.require('goog.ui.ToolbarToggleButton');

  </script>



  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/common.css'>
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/button.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/dialog.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/linkbutton.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/menu.css'>
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/menuitem.css'>
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/menuseparator.css'>
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/tab.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/tabbar.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/toolbar.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/colormenubutton.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/palette.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/colorpalette.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/editor/bubble.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/editor/dialog.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/editor/linkdialog.css' />
  <link rel='stylesheet' href='http://192.168.1.54:2438/closure-library/closure/goog/css/editortoolbar.css' />



    
</head>

<body>
    {{> loginButtons}}
    {{ > slideshowTitle}}
    {{> toolbar}}
    {{> buttons}}
    {{> timeline}}
    {{> clonedTimeline}}
    <div id='editor-container'>
        {{> editorContainer}}
    </div>
    
    <div id='jmpress-container'>
        {{> jmpressContainer}}
    </div>
    
    <div class='deck-container'>
        {{> deckContainer}}   
    </div>
    
    {{> modalCurrentEditing}}
    {{> modalTemplate}}
    
      

</body>

<template name="slideshowTitle">
      <div id="slideshowTitle"> >> {{slideshowTitle}} </div>
      <div id="slideCurrentEditing"> {{slideTitle}} </div>
</template>  

<template name='toolbar'>
    <div id='toolbar'></div>
</template>  

<template name='buttons'>
    <div id="buttons" class="goog-toolbar goog-toolbar">
      <div id="loadSlideshow" class="goog-toolbar-button">Load Slideshow</div>
      <div id="createSlideshow" class="goog-toolbar-button">Create Slideshow</div>
      <div id="updateSlideshow" class="goog-toolbar-button">Update Slideshow</div>
      <div id="deleteSlideshow" class="goog-toolbar-button">Delete Slideshow</div>
      <hr>
      <div id="launchSlideshow" class="goog-toolbar-menu-button">
        Launch Slideshow
        <div id="decoratedMenuLaunch" class="goog-menu">
          <div id="launchJmpress" class="goog-menuitem">jmpressjs</div>
          <div id="launchDeck" class="goog-menuitem">deckjs</div>
        </div>
      </div>
      <div dir='rtl' id="backToEditor" class="goog-toolbar-button goog-toolbar-button-disabled">
        Back to editor
      </div>
      <br>
      <div id="createSlide" class="goog-toolbar-button">Create Slide</div>



      <div id="showTimeline" class="goog-toolbar-toggle-button goog-toolbar-button-checked">
        Show Timeline
      </div>
    </div>

</template>

 
<!---------------------------- slide container ---------------------------->

<template name='editorContainer' > 
    {{#each slides}}
         {{> editorSlide}}
    {{/each}}
</template>

<template name='jmpressContainer'>  
    {{#each slides}}
         {{> jmpressSlide}}
    {{/each}}
</template>

<template name='deckContainer'>   
    {{#each slides}}
         {{> deckSlide}}
    {{/each}}
</template>

<template name='modalCurrentEditing'>
        <div id='modalCurrentEditing'>
          {{#each editorSlideCurrentEditing}}
          {{> editorSlideCurrentEditingT}}
          {{/each}}
        </div>
</template>

<template name="timeline">
    <div id="timeline">
      <h2 class='timeline-slides-title'> Timeline </h2>
      {{#each slides}}
              {{> timelineSlide}}
      {{/each}}
    </div>  
</template> 

<template name="clonedTimeline">
    <div class='cloned-slides' id='cloned-slides'>
      {{#each slides}}
              {{> clonedTimelineSlide}}
      {{/each}}
    </div>
</template>  

<!---------------------------- slide  ---------------------------->

<template name='editorSlide'>
    <div id='{{_id}}' class='slide {{isLocked}} {{isActive}}' style='width:{{getEditorData 'w'}}px; height:{{getEditorData 'h'}}px; top:{{getEditorData 'y'}}px; left:{{getEditorData 'x'}}px ;transform:scale({{getEditorData 'scaleX'}},{{getEditorData 'scaleY'}})'> 
         {{> deleteSlide }}
         {{> editSlideContent}}
         <p class='title'> {{order}} - {{informations.title}} </p>
    
      {{> elementsArea}}
    </div>      
</template> 

<template name='jmpressSlide'>
    <div id='{{_id}}' class='step slide' 
         data-x='{{getJmpressData 'x'}}' data-y='{{getJmpressData 'y'}}' data-z='{{getJmpressData 'z'}}' >        
         <p class='title'> {{informations.title}} </p>         
      {{> elementsAreaJmpress}}        
    </div>    
</template> 

<template name='deckSlide'>
    <section id='{{_id}}' class='slide'>        
         <h1> {{informations.title}} </h1>         
         {{> elementsArea}}
    </section>      
</template> 

<template name='editorSlideCurrentEditingT'>
    <div id='{{_id}}'>   
        {{> elementsAreaCurrentEditing}}
    </div>      
</template> 

<template name="timelineSlide">
  <div class="timeline-slide" id='{{_id}}-timeline'> 
      <p class='title'> {{informations.title}}_{{order}} </p>
      {{> elementsAreaTimeline}}
  </div>
</template> 

<template name="clonedTimelineSlide">
  <div class="timeline-slide" id='{{_id}}-timeline-cloned'> 
      <p class='title'> {{informations.title}}_{{order}} </p>
      {{> elementsAreaTimeline}}
  </div>
</template> 

<!---------------------------- element container  ---------------------------->

<template name='elementsArea'>
    <div class='elementsArea'>        
        {{#each elements}}              
          {{> element}}
        {{/each}}         
    </div>   
</template>

<template name='elementsAreaJmpress'>
    <div class='elementsAreaJmpress'>        
        {{#each elements}}              
          {{> elementJmpress}}
        {{/each}}         
    </div>   
</template>

<template name='elementsAreaCurrentEditing'>
    <div class='elementsAreaCurrentEditing' style="width:900px; height:700px;">        
        {{#each elements}}         
            {{> elementCurrentEditing}}
        {{/each}}         
    </div>
</template>

<template name='elementsAreaTimeline'>
    <div class='elementsAreaTimeline'>        
        {{#each elements}}              
          {{> elementTimeline}}
        {{/each}}         
    </div>   
</template>

<!---------------------------- element   ---------------------------->

<template name='element'>
    <div id='{{_id}}-wrapper' class=' wrapper-element element' style='width:{{getEditorData 'w'}}px; height:{{getEditorData 'h'}}px; top:{{getEditorData 'y'}}px; left:{{getEditorData 'x'}}px ;transform:scale({{getEditorData 'scaleX'}},{{getEditorData 'scaleY'}}); font-size:{{getFontSize}}px' >
        <div id='{{_id}}' class='editor {{type}}'></div>       
    </div>
</template> 

<template name='elementJmpress'>
    <div id='{{_id}}-wrapper' class='wrapper-element element' style='width:{{getEditorData 'w'}}px; height:{{getEditorData 'h'}}px; top:{{getEditorData 'y'}}px; left:{{getEditorData 'x'}}px ;transform:scale({{getEditorData 'scaleX'}},{{getEditorData 'scaleY'}}); font-size:{{getFontSize}}px' >
        <div id='{{_id}}' class='editor {{type}}'>{{content}}</div>       
    </div>
</template> 

<template name='elementCurrentEditing'>
   <div id='{{_id}}-currentEditing-wrapper' class='{{isLocked}} wrapper-element-currentEditing element' style='width:{{getEditorData 'w'}}px; height:{{getEditorData 'h'}}px;top:{{getEditorData 'y'}}px; left:{{getEditorData 'x'}}px; '>
      {{>editTexteContent}}
      {{>deleteElement}}
      <div id='{{_id}}-dragMe' class='elementDragMe'> {{! has to wrapp text in order to get event bubbling because of texte is z-index upper than dragme}}
        <div id='{{_id}}-currentEditing' class='editor {{type}}'>
            {{{content}}}
        </div>       
      </div>
    </div>  
</template> 

<template name='elementTimeline'>
    <div id='{{_id}}-wrapper-timeline' class='wrapper-element-timeline element' style='width:{{getEditorData 'w'}}px; height:{{getEditorData 'h'}}px; top:{{getEditorData 'y'}}px; left:{{getEditorData 'x'}}px ;transform:scale({{getEditorData 'scaleX'}},{{getEditorData 'scaleY'}}); font-size:{{getFontSize}}px' >
        <div id='{{_id}}-timeline' class='{{type}}'></div>       
    </div>
</template> 

<!---------------------------- button   ---------------------------->

<template name='deleteSlide'><input type='button' class='deleteSlide' value='X'></template>
<template name='deleteElement'><input type='button' class='deleteElement' value='X'></template>

<template name='editSlideContent'><input type='button' class='editSlideContent' value='edit'></template>
<template name='editTexteContent'><input type='button' class='editTextContent' value='edit'></template>


<!---------------------------- modal   ---------------------------->


<template name='modalTemplate'>
    {{#if isVisible}}
        <div id='modalSelectSlideshow'>
            <div>
                <p> Choose a slideshow to load </p>                
                {{data}}
                {{>listSlideshow}}
            </div>
           {{>cancel}}
           {{>validate}}
        </div>
   {{/if}}
</template>

<template name='cancel'>
   <input class='cancel button' type='button' value='cancel'/> 
</template>

<template name='validate'>
   <input class='validate button' type='button' value='validate'/> 
</template>

<template name='listSlideshow'>
    {{#each slideshowList}}
            <input type='button' value='{{this}}'/>
    {{/each}}
</template>